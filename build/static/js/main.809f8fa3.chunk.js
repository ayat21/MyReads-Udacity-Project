(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(38)},30:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(16),c=a.n(r),l=a(5),s=a.n(l),u=a(9),i=a(6),h=a(14),m="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var b={Accept:"application/json",Authorization:f},d=function(){return fetch("".concat(m,"/books"),{headers:b}).then(function(e){return e.json()}).then(function(e){return e.books})},k=function(e,t){return fetch("".concat(m,"/books/").concat(e.id),{method:"PUT",headers:Object(h.a)({},b,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},p=(a(30),a(7)),v=a(0),E=a(19),g=a(18),S=function(e){e.books;var t=Object(n.useState)(null),a=Object(i.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)(null),s=Object(i.a)(l,2),u=s[0],h=s[1];return o.a.createElement("div",{className:"star-rate"},Object(E.a)(Array(5)).map(function(e,t){var a=t+1;return o.a.createElement("label",{key:t},o.a.createElement("input",{value:a,className:"star-input",type:"radio",name:"rating",onClick:function(){return c(a)}}),o.a.createElement(g.a,{color:a<=(u||r)?"#ffee00":"#d4d4d4",onMouseOver:function(){return h(a)},onMouseOut:function(){return h(null)}}))}))};var y=function(e){return o.a.createElement("li",null,o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:e.book.imageLinks?"url(".concat(e.book.imageLinks.smallThumbnail,")"):""}}),o.a.createElement(S,null),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{onChange:function(t){e.changeShelf(e.book,t.target.value)},value:e.book.shelf?e.book.shelf:"none"},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"},e.book.title),o.a.createElement("div",{className:"book-authors"},e.book.authors),o.a.createElement("div",{className:"book-authors"},o.a.createElement("strong",null,e.book.shelf?e.book.shelf:"none"))))},N=function(e){var t=e.section,a=e.books,n=e.category,r=e.changeShelf,c=a.filter(function(e){return e.shelf===n});return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},t),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},c.map(function(e){return o.a.createElement(y,{key:e.id,book:e,changeShelf:r})}))))},j=function(e){var t=e.books,a=e.changeShelf;return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null," ",o.a.createElement("span",null,"My"),"reads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement(N,{section:"Currently Reading",books:t,category:"currentlyReading",changeShelf:a}),o.a.createElement(N,{section:"Want To Read",books:t,category:"wantToRead",changeShelf:a}),o.a.createElement(N,{section:"Read",books:t,category:"read",changeShelf:a}))),o.a.createElement("div",{className:"open-search"},o.a.createElement(p.b,{to:"/search",className:"open-serch__link"},"Add a book")))},O=function(e){var t=e.booksFromSearch,a=e.changeShelf,n=e.loadSearch;return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},n?t.map(function(e){return o.a.createElement(y,{key:e.id,book:e,changeShelf:a})}):"")))},w=function(e){var t=e.handleSearch,a=(e.search,e.booksFromSearch),n=e.changeShelf,r=e.loadSearch;return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(p.b,{to:"/",className:"close-search"},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:t}))),o.a.createElement(O,{booksFromSearch:a,changeShelf:n,loadSearch:r}))},x=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),l=Object(i.a)(c,2),f=l[0],E=l[1],g=Object(n.useState)(""),S=Object(i.a)(g,2),y=S[0],N=S[1],O=Object(n.useState)(!1),x=Object(i.a)(O,2),R=x[0],C=x[1];Object(n.useEffect)(function(){!function(){var e=Object(u.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()()},[]);var T=function(){var e=Object(u.a)(s.a.mark(function e(t,a){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t,a);case 2:return e.next=4,d().then(function(e){r(e)});case 4:A(N(y));case 5:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t.target.value);case 2:console.log(t.target.value),A(t.target.value);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(n=t,fetch("".concat(m,"/search"),{method:"POST",headers:Object(h.a)({},b,{"Content-Type":"application/json"}),body:JSON.stringify({query:n})}).then(function(e){return e.json()}).then(function(e){return e.books})).then(function(e){e&&!e.error?(console.log("1",e),E(e.map(function(e){return a.forEach(function(t){e.id===t.id&&(e.shelf=t.shelf)}),e})),C(!0)):(E([]),C(!1))});case 2:case"end":return e.stop()}var n},e,this)}));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(p.a,null,o.a.createElement("div",{className:"app"},o.a.createElement(v.c,null,o.a.createElement(v.a,{path:"/search"},o.a.createElement(w,{handleSearch:M,search:y,booksFromSearch:f,changeShelf:T,loadSearch:R})),o.a.createElement(v.a,{path:"/"},o.a.createElement(j,{books:a,changeShelf:T})))))};a(36);c.a.render(o.a.createElement(x,null),document.getElementById("root"))}},[[20,2,1]]]);
//# sourceMappingURL=main.809f8fa3.chunk.js.map